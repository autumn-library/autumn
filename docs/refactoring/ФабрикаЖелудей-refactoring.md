# Диаграмма классов рефакторинга ФабрикаЖелудей

## До рефакторинга

```
┌─────────────────────────────────────────────────────────────────┐
│                       ФабрикаЖелудей                             │
├─────────────────────────────────────────────────────────────────┤
│ - ОпределенияЖелудейПоИмени                                     │
│ - ОпределенияЖелудейПоПрозвищу                                  │
│ - ОпределенияНапильников                                         │
│ - ОпределенияНапильниковПоИмени                                 │
│ - КэшПрименяемыхНапильников                                     │
│ - ИнициализируемыеНапильники                                     │
├─────────────────────────────────────────────────────────────────┤
│ + ПолучитьОпределенияЖелудей()                                   │
│ + ПолучитьОпределениеЖелудя()                                    │
│ + ДобавитьНапильник()                                            │
│ + ПроинициализироватьНапильники()                                │
│ + НайтиЖелудь()                                                  │
│ + СоздатьЗавязь()                                                │
│ + ПрочитатьИмяЖелудя()                                           │
│ + ПрочитатьХарактерЖелудя()                                      │
│ + ОпределитьПрименяемыеНапильники()                              │
│ + ... (еще ~20 методов)                                         │
└─────────────────────────────────────────────────────────────────┘
```

## После рефакторинга

```
┌─────────────────────────────────────────────────────────────────┐
│                       ФабрикаЖелудей                             │
├─────────────────────────────────────────────────────────────────┤
│ - РепозиторийОпределенийЖелудей                                 │
│ - МенеджерНапильников                                            │
│ - ЧитательАннотаций                                             │
│ - ФабрикаЗавязей                                                │
├─────────────────────────────────────────────────────────────────┤
│ + ПолучитьОпределенияЖелудей()                                   │
│ + ПолучитьОпределениеЖелудя()                                    │
│ + ДобавитьНапильник()                                            │
│ + НайтиЖелудь()                                                  │
│ + ДобавитьДуб()                                                  │
│ + ДобавитьЗавязьИзЛямбды()                                       │
└─────────────────────────────────────────────────────────────────┘
                                │
                                │ использует
                                ▼
┌──────────────────────┬──────────────────────┬──────────────────────┐
│                      │                      │                      │
│ РепозиторийОпреде-   │   МенеджерНапильников│     ЧитательАннотаций│
│ ленийЖелудей         │                      │                      │
├──────────────────────┼──────────────────────┼──────────────────────┤
│ - ОпределенияЖелудей-│ - ОпределенияНапиль- │                      │
│   ПоИмени            │   ников              │                      │
│ - ОпределенияЖелудей-│ - КэшПрименяемых-    │                      │
│   ПоПрозвищу         │   Напильников        │                      │
├──────────────────────┼──────────────────────┼──────────────────────┤
│ + ПолучитьОпределе-  │ + ДобавитьНапильник()│ + ПрочитатьИмяЖелудя()│
│   нияЖелудей()       │ + Проинициализировать-│ + ПрочитатьХарактер-│
│ + ПолучитьОпределе-  │   Напильники()       │   Жилудя()           │
│   ниеЖелудя()        │ + ПрименитьНапильники│ + ПрочитатьПорядок() │
│ + СохранитьОпределе- │ + ОпределитьПримен-  │ + ПрочитатьПрозвища()│
│   ниеЖелудя()        │   яемыеНапильники()  │ + ...                │
└──────────────────────┴──────────────────────┴──────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                      ФабрикаЗавязей                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│ + СоздатьЗавязь()                                               │
│ - СоздатьЗавязьЧерезКонструкторОбъекта()                        │
│ - СоздатьЗавязьЧерезМетодЗавязи()                               │
│ - СоздатьЗавязьЧерезМетодЛямбды()                               │
└─────────────────────────────────────────────────────────────────┘
```

## Основные преимущества рефакторинга

### 1. Разделение ответственностей (Single Responsibility Principle)
- **ФабрикаЖелудей**: Фокус на создании желудей и координации процесса
- **МенеджерНапильников**: Управление жизненным циклом напильников
- **РепозиторийОпределенийЖелудей**: Хранение и поиск определений
- **ЧитательАннотаций**: Парсинг параметров из аннотаций
- **ФабрикаЗавязей**: Создание различных типов завязей

### 2. Уменьшение сложности
- Размер ФабрикаЖелудей уменьшился с ~738 строк до ~360 строк
- Каждый класс решает конкретную задачу
- Легче тестировать и поддерживать

### 3. Переиспользование и расширение
- Классы можно использовать независимо
- Легче добавлять новую функциональность
- Можно заменять реализации отдельных компонентов

### 4. Читаемость кода
- Название классов четко описывает их назначение
- Методы сгруппированы по логике
- Уменьшено количество зависимостей между методами

### 5. Возможности для дальнейшего развития
- Можно выделить дополнительные приемки для валидации
- Легко добавить новые типы завязей
- Возможность оптимизации отдельных компонентов